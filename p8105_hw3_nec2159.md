p8105_hw3_nec2159
================
Nicole Criscuolo
2025-10-02

## Problem 1

``` r
aisle_df =
  instacart |> 
  count(aisle) |> 
  arrange(desc(n))
```

The data set includes 1384617 observations and 15 variables. Key
variables include information about the product ordered (`product_name`,
`department`,`aisle`) and when the order was placed (`order_dow`,
`order_hour_of_day`), along with information about the customerâ€™s order
habits (`reorder`, `order_number`, `days_since_prior_order`). The table
gives this information pertaining to each item ordered. In other words,
it lists out all the items that were ordered each time they were
ordered. The other variables then tell us about the order each item
belonged to (each time it was ordered) and other information as
described above.

There are 134 aisles. The top 5 aisles where most items are ordered from
are: fresh vegetables, fresh fruits, packaged vegetables fruits, yogurt,
packaged cheese.

``` r
items_ordered_plot = 
aisle_df |>
  filter(n > 10000, n < 160000) |> 
  mutate(aisle = forcats::fct_reorder(aisle, n)) |> 
  ggplot(aes(x = n, y = aisle)) +
  geom_col(aes(fill = "purple"), show.legend = FALSE) +
    labs (
    x = "Number of Items Ordered",
    y = "Aisle",
    title = "Number of Items Ordered from Each Aisle",
    caption = "Data from Instacart"
  ) 
```

``` r
popular_items_df =
  instacart |> 
  filter(aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits")) |> 
  count(product_name, aisle) |> 
  arrange(desc(n)) |> 
  rename(times_ordered = n) |> 
  group_by(aisle) |> 
  filter(row_number() < 4) |> 
  knitr::kable()

print(popular_items_df)
```

    ## 
    ## 
    ## |product_name                                  |aisle                      | times_ordered|
    ## |:---------------------------------------------|:--------------------------|-------------:|
    ## |Organic Baby Spinach                          |packaged vegetables fruits |          9784|
    ## |Organic Raspberries                           |packaged vegetables fruits |          5546|
    ## |Organic Blueberries                           |packaged vegetables fruits |          4966|
    ## |Light Brown Sugar                             |baking ingredients         |           499|
    ## |Pure Baking Soda                              |baking ingredients         |           387|
    ## |Cane Sugar                                    |baking ingredients         |           336|
    ## |Snack Sticks Chicken & Rice Recipe Dog Treats |dog food care              |            30|
    ## |Organix Chicken & Brown Rice Recipe           |dog food care              |            28|
    ## |Small Dog Biscuits                            |dog food care              |            26|

``` r
mean_hour_df =
  instacart |> 
  filter(product_name %in% c("Pink Lady Apples", "Coffee Ice Cream")) |> 
  group_by(order_dow) |> 
  summarize(
    mean_hour_ordered = mean(order_hour_of_day)
  ) |> 
  knitr::kable()

print(mean_hour_df)
```

    ## 
    ## 
    ## | order_dow| mean_hour_ordered|
    ## |---------:|-----------------:|
    ## |         0|          13.60000|
    ## |         1|          12.17391|
    ## |         2|          12.83824|
    ## |         3|          14.68519|
    ## |         4|          13.17308|
    ## |         5|          12.64286|
    ## |         6|          13.25000|

## Problem 2

``` r
zip_df =
  read_csv("data/Zip Codes.csv") |> 
  janitor::clean_names() |> 
  select(-state_fips, -file_date, -county) |> 
  distinct(zip_code, .keep_all = TRUE)

zori_df =
  read_csv("data/Zip_zori_NYC.csv") |> 
  pivot_longer(
    cols = "2015-01-31":"2024-08-31",
    names_to = "date",
    values_to = "zori"
  ) |> 
  janitor::clean_names() |> 
  rename(zip_code = region_name) |> 
  select(-region_type, -state_name, -state, -city, -metro) |> 
  separate(date, into = c("year", "month", "day"), sep = "-") |> 
  mutate(borough = case_match(
    county_name,
      "Bronx County" ~ "The Bronx",
      "Kings County" ~ "Brookyln",
      "New York County" ~ "Manhattan",
      "Queens County" ~ "Queens",
      "Richmond County" ~ "Staten Island"
    )
  )

zip_zori_df =
  left_join(zori_df, zip_df) |> 
  arrange(zip_code)
```

\*\* There are 48 ZIP codes observed 116 times. There are 26 ZIP codes
observed fewer than 10 times. \##Why are some ZIP codes are observed
rarely and others observed in each month?##

Create a reader-friendly table showing the average rental price in each
borough and year (not month). Comment on trends in this table.

``` r
zip_zori_df |> 
  group_by(borough, year) |> 
  summarize(
    avg_rental_price = mean(zori, na.rm = TRUE)
  ) |> 
  knitr::kable()
```

    ## `summarise()` has grouped output by 'borough'. You can override using the
    ## `.groups` argument.

| borough       | year | avg_rental_price |
|:--------------|:-----|-----------------:|
| Brookyln      | 2015 |         2492.928 |
| Brookyln      | 2016 |         2520.357 |
| Brookyln      | 2017 |         2545.828 |
| Brookyln      | 2018 |         2547.291 |
| Brookyln      | 2019 |         2630.504 |
| Brookyln      | 2020 |         2555.051 |
| Brookyln      | 2021 |         2549.890 |
| Brookyln      | 2022 |         2868.199 |
| Brookyln      | 2023 |         3015.184 |
| Brookyln      | 2024 |         3126.803 |
| Manhattan     | 2015 |         3022.042 |
| Manhattan     | 2016 |         3038.818 |
| Manhattan     | 2017 |         3133.848 |
| Manhattan     | 2018 |         3183.703 |
| Manhattan     | 2019 |         3310.408 |
| Manhattan     | 2020 |         3106.517 |
| Manhattan     | 2021 |         3136.632 |
| Manhattan     | 2022 |         3778.375 |
| Manhattan     | 2023 |         3932.610 |
| Manhattan     | 2024 |         4078.440 |
| Queens        | 2015 |         2214.707 |
| Queens        | 2016 |         2271.955 |
| Queens        | 2017 |         2263.303 |
| Queens        | 2018 |         2291.918 |
| Queens        | 2019 |         2387.816 |
| Queens        | 2020 |         2315.632 |
| Queens        | 2021 |         2210.787 |
| Queens        | 2022 |         2406.038 |
| Queens        | 2023 |         2561.615 |
| Queens        | 2024 |         2694.022 |
| Staten Island | 2015 |              NaN |
| Staten Island | 2016 |              NaN |
| Staten Island | 2017 |              NaN |
| Staten Island | 2018 |              NaN |
| Staten Island | 2019 |              NaN |
| Staten Island | 2020 |         1977.608 |
| Staten Island | 2021 |         2045.430 |
| Staten Island | 2022 |         2147.436 |
| Staten Island | 2023 |         2332.934 |
| Staten Island | 2024 |         2536.442 |
| The Bronx     | 2015 |         1759.595 |
| The Bronx     | 2016 |         1520.194 |
| The Bronx     | 2017 |         1543.599 |
| The Bronx     | 2018 |         1639.430 |
| The Bronx     | 2019 |         1705.589 |
| The Bronx     | 2020 |         1811.443 |
| The Bronx     | 2021 |         1857.777 |
| The Bronx     | 2022 |         2054.267 |
| The Bronx     | 2023 |         2285.459 |
| The Bronx     | 2024 |         2496.896 |

``` r
zip_zori_df |> 
  group_by(borough) |> 
  summarize(
    avg_rental_price = mean(zori, na.rm = TRUE)
  ) |> 
  knitr::kable()
```

| borough       | avg_rental_price |
|:--------------|-----------------:|
| Brookyln      |         2706.038 |
| Manhattan     |         3370.744 |
| Queens        |         2402.835 |
| Staten Island |         2287.767 |
| The Bronx     |         2012.228 |

``` r
zip_zori_df |> 
  group_by(year) |> 
  summarize(
    avg_rental_price = mean(zori, na.rm = TRUE)
  ) |> 
  knitr::kable()
```

| year | avg_rental_price |
|:-----|-----------------:|
| 2015 |         2757.287 |
| 2016 |         2721.171 |
| 2017 |         2751.325 |
| 2018 |         2764.329 |
| 2019 |         2872.500 |
| 2020 |         2721.658 |
| 2021 |         2674.172 |
| 2022 |         3024.267 |
| 2023 |         3140.425 |
| 2024 |         3241.673 |
